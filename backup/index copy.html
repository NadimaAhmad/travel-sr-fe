<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplikasi Travel ‚Äì Tebo ‚áÑ Padang</title>
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <meta name="title" content="Aplikasi Travel Contoh ‚Äì SR Tour Travel Tebo ‚áÑ Padang">
    <meta name="description" content="Preview aplikasi contoh pemesanan travel SR Tour Travel rute Tebo ‚áÑ Padang. Pesan armada, pilih kursi, dan cek riwayat booking dengan mudah.">
    <meta property="og:title" content="Aplikasi Travel ‚Äì SR Tour Travel Tebo ‚áÑ Padang">
    <meta property="og:description" content="Preview aplikasi pemesanan travel SR Tour Travel rute contoh Tebo ‚áÑ Padang. Mudah, cepat, dan praktis!">
    <meta property="og:image" content="https://vistaeducation.com/uploads/article/large-bZ8K4XpKmxTVVPop8whdSiw7O-MJJaNU.jpg">
    <meta property="og:type" content="website">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Vue 3 -->
     <link rel="stylesheet" href="style.css">
    <!-- SweetAlert2 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.27/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.27/dist/sweetalert2.all.min.js"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <style>
        body {
            /* background-color: rgb(17, 16, 16); */
            /* font-family: 'Segoe UI', sans-serif; */
            /* min-height: 100vh; */
            padding-top: 20px;
            padding-bottom: 20px;
        }

        .card {
            border-radius: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
        }

        .btn-main {
            background: linear-gradient(135deg, #3b82f6, #06b6d4);
            color: white;
            border-radius: 12px;
            border: none;
        }

        .btn-main:hover {
            opacity: 0.9;
        }

        .seat {
            width: 40px;
            height: 40px;
            margin: 5px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            background: #e5e7eb;
        }

        .seat.selected {
            background: #3b82f6;
            color: white;
        }

        .seat.booked {
            background: #9ca3af;
            color: white;
            cursor: not-allowed;
        }

        .container {
            max-width: 600px;
        }

        .card-body {
            padding: 1.5rem;
        }

        .list-group-item {
            border-radius: 12px !important;
            margin-bottom: 8px;
            transition: all 0.2s;
        }

        .list-group-item:last-child {
            margin-bottom: 0;
        }
    </style>
</head>

<body class="bg-body-tertiary">

   
    <div id="app" class="container   jkt-font vh-100 d-flex flex-column justify-content-end pb-5 pt-4">
        <div class="">
            <div class="card  ">

         

                
                
                <div class="card-body">

                    
                    

                    <div class="d-flex gap-2 fw-bold mb-3 justify-content-between align-items-center ">
                        <h3 class="text-center p-0 m-0 fw-bold">SR Tour Travel </h3>
                        <p class="text-center p-0 m-0 bt-font fs-1 text-warning">Contoh</p>
                    </div>

                    <!-- ===================== -->
                    <!-- BLOK 2: HALAMAN RUTE -->
                    <div v-if="page==='rute'">
                        

                        <img class="py-3 rounded-4" src="image.png" width="100%" alt="">

                        <h5 class="mb-3">Pilih Rute Perjalanan</h5>

                        <div class="list-group mb-4">
                            <button
                                class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
                                @click="pilihRute('Tebo', 'Padang')">
                                <span>Tebo ‚Üí Padang</span>
                                <i class="bi bi-chevron-right"></i>
                            </button>
                            <button
                                class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
                                @click="pilihRute('Padang', 'Tebo')">
                                <span>Padang ‚Üí Tebo</span>
                                <i class="bi bi-chevron-right"></i>
                            </button>
                        </div>

                        <div v-if="ruteDipilih" class="alert alert-info p-2 mb-4">
                            Rute dipilih: <strong>{{ ruteDipilih.asal }} ‚Üí {{ ruteDipilih.tujuan }}</strong>
                        </div>

                        <div class="d-flex justify-content-end">
                            <button class="btn btn-main" :disabled="!ruteDipilih" @click="page='lokasi'">
                                Lanjut <i class="bi bi-arrow-right"></i>
                            </button>
                        </div>
                    </div>


                    <!-- ===================== -->
                    <!-- BLOK 3: HALAMAN LOKASI -->
                    <div v-if="page==='lokasi'">

                        <img class="py-3 rounded-4" src="location2.png" width="100%" alt="">
                        <h5 class="mb-3">Pilih Titik Keberangkatan</h5>

                        

                        <div class="list-group mb-4">
                            <!-- Loket Utama (dinamis berdasarkan rute) -->
                            <button class="list-group-item list-group-item-action"
                                @click="pilihLokasi(`Loket Utama ${ruteDipilih.asal}`)">
                                üè¢ Loket Utama {{ ruteDipilih.asal }}
                            </button>

                            <!-- Jemput ke Rumah -->
                            <button class="list-group-item list-group-item-action" @click="pilihLokasi('Jemput Rumah')">
                                üè† Jemput Rumah (GPS / Shareloc WA)
                            </button>
                        </div>

                        <!-- Jika Jemput Rumah -->
                        <div v-if="lokasiDipilih==='Jemput Rumah'" class="mb-4">
                            <label class="form-label">Shareloc / Koordinat</label>
                            <input type="text" class="form-control" v-model="alamatRumah"
                                placeholder="Tempel link WA shareloc atau koordinat GPS">
                        </div>

                        <div v-if="lokasiDipilih" class="alert alert-info p-2 mb-4">
                            Lokasi dipilih: <strong>{{ lokasiDipilih }}</strong>
                            <span v-if="lokasiDipilih==='Jemput Rumah' && alamatRumah">
                                <br>Alamat: {{ alamatRumah }}
                            </span>
                        </div>

                        <div class="d-flex justify-content-between">
                            <button class="btn btn-outline-secondary" @click="page='rute'">
                                <i class="bi bi-arrow-left"></i> Kembali
                            </button>
                            <button class="btn btn-main"
                                :disabled="!lokasiDipilih || (lokasiDipilih==='Jemput Rumah' && !alamatRumah)"
                                @click="page='armada'">
                                Lanjut <i class="bi bi-arrow-right"></i>
                            </button>
                        </div>
                    </div>


                    <!-- ===================== -->
                    <!-- BLOK 4: HALAMAN ARMADA -->
                    <div v-if="page==='armada'" >

                         <!-- <img class="py-3 rounded-4" src="seat.png" width="100%" alt=""> -->
                        <h5 class="mb-3">Pilih Armada & Kursi</h5>

                        <!-- List Armada -->
                        <div v-for="(a, i) in ruteDipilih.armada" :key="i" class="card mb-3 shadow-sm rounded-4">
                            <div class="card-body">
                                <h6 class="card-title">
                                    {{ a.nama }} - {{ a.plat }}
                                </h6>
                                <p class="mb-2 text-muted">
                                    Kapasitas: {{ a.kursi.length }} kursi
                                </p>

                                <!-- Seat Map -->
                                <div class="seatmap d-flex flex-wrap gap-2 mb-3">
                                    <div v-for="(s, idx) in a.kursi" :key="idx" class="seat text-center"
                                        :class="{'booked': !s.tersedia, 'selected': seatDipilih.includes(s)}"
                                        @click="toggleSeat(s, a)">
                                        {{ s.nomor }}
                                    </div>
                                </div>

                                <!-- Info Armada -->
                                <div class="d-flex justify-content-between">
                                    <span class="small text-muted">
                                        Kursi tersedia: {{ a.kursi.filter(s => s.tersedia).length }}
                                    </span>
                                    <button class="btn btn-sm btn-main"
                                        :disabled="seatDipilih.length === 0 || seatDipilihArmada !== a"
                                        @click="pilihArmada(a)">
                                        Pilih Armada
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="d-flex justify-content-between mt-3">
                            <button class="btn btn-outline-secondary" @click="page='lokasi'">
                                <i class="bi bi-arrow-left"></i> Kembali
                            </button>
                        </div>
                    </div>


                    <!-- ========================= -->
                    <!-- BLOK 5: HALAMAN KONFIRMASI -->
                    <div v-if="page==='konfirmasi'" class="overflow-x-auto" style="max-height: 80vh;">
                        <h5 class="mb-3">Konfirmasi Pemesanan</h5>

                        <!-- Ringkasan -->
                        <div class="card mb-3 shadow-sm rounded-4 ">
                            <div class="card-body">
                                <h6 class="card-title">Detail Perjalanan</h6>
                                <ul class="list-unstyled mb-2 small">
                                    <li><strong>Rute:</strong> {{ booking.rute }}</li>
                                    <li><strong>Tanggal:</strong> {{ booking.tanggal }}</li>
                                    <li><strong>Lokasi Jemput:</strong> {{ booking.jemput }}</li>
                                    <li><strong>Lokasi Tujuan:</strong> {{ booking.tujuan }}</li>
                                </ul>
                                <h6 class="card-title">Armada & Kursi</h6>
                                <ul class="list-unstyled small">
                                    <li><strong>Armada:</strong> {{ booking.armada.nama }} ({{ booking.armada.plat }})
                                    </li>
                                    <li><strong>Kursi:</strong> {{ booking.seatDipilih.map(s=>s.nomor).join(', ') }}
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <!-- Form Data Penumpang -->
                        <div class="card shadow-sm rounded-4 mb-3">
                            <div class="card-body">
                                <h6 class="card-title">Data Penumpang</h6>
                                <div class="mb-2">
                                    <label class="form-label">Nama Lengkap</label>
                                    <input type="text" class="form-control" v-model="booking.nama" required>
                                </div>
                                <div class="mb-2">
                                    <label class="form-label">Nomor HP</label>
                                    <input type="tel" class="form-control" v-model="booking.hp" required>
                                </div>
                                <div class="mb-2">
                                    <label class="form-label">Tanggal Keberangkatan</label>
                                    <input type="date" class="form-control" v-model="booking.tanggal" required>
                                </div>
                                <div class="mb-2">
                                    <label class="form-label">Catatan</label>
                                    <textarea class="form-control" rows="2" v-model="booking.catatan"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Tombol -->
                        <div class="d-flex justify-content-between mt-3">
                            <button class="btn btn-outline-secondary" @click="page='armada'">
                                <i class="bi bi-arrow-left"></i> Kembali
                            </button>
                            <button class="btn btn-main" @click="submitBooking">
                                Konfirmasi & Pesan
                            </button>
                        </div>
                    </div>


                    <!-- ========================= -->
                    <!-- BLOK 6: HALAMAN RIWAYAT -->
                    <div v-if="page==='riwayat'">
                        <h5 class="mb-3">Riwayat Pemesanan</h5>

                        <!-- Jika belum ada booking -->
                        <div v-if="riwayat.length===0" class="text-center text-muted py-4">
                            <i class="bi bi-calendar-x display-6 d-block mb-2"></i>
                            Belum ada riwayat pemesanan
                        </div>

                        <!-- Daftar Riwayat -->
                        <div v-else>
                            <div v-for="(r,i) in riwayat" :key="i" class="card mb-3 shadow-sm rounded-4">
                                <div class="card-body">
                                    <h6 class="card-title">
                                        {{ r.rute }} ‚Äì {{ formatDate(r.tanggal) }}
                                    </h6>
                                    <p class="small mb-1">
                                        Armada: {{ r.armada.nama }} ({{ r.armada.plat }}) <br>
                                        Kursi: {{ r.seatDipilih.map(s=>s.nomor).join(', ') }} <br>
                                        Penumpang: {{ r.nama }} ({{ r.hp }})
                                    </p>
                                    <span class="badge" :class="{
                    'bg-warning text-dark': r.status==='pending',
                    'bg-success': r.status==='confirmed',
                    'bg-secondary': r.status==='selesai'
                  }">
                                        {{ statusText(r.status) }}
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- Tombol -->
                        <div class="mt-3">
                            <button class="btn btn-main w-100" @click="page='rute'">
                                <i class="bi bi-plus-circle"></i> Pesan Baru
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, onMounted, watch } = Vue;

        createApp({
            setup() {
                const page = ref('rute');
                const ruteDipilih = ref(null);
                const lokasiDipilih = ref('');
                const alamatRumah = ref('');
                const armadaDipilih = ref(null);
                const seatDipilih = ref([]);
                const seatDipilihArmada = ref(null);
                const booking = ref({
                    nama: '',
                    hp: '',
                    tanggal: '',
                    rute: '',
                    jemput: '',
                    tujuan: '',
                    armada: null,
                    seatDipilih: [],
                    catatan: ''
                });
                const riwayat = ref([]);

                // Data rute dummy
                const ruteList = [
                    {
                        id: 1,
                        asal: "Tebo",
                        tujuan: "Padang",
                        armada: [
                            {
                                nama: "Toyota Avanza",
                                plat: "BA 1234 CD",
                                kursi: [
                                    { nomor: "1", tersedia: true },
                                    { nomor: "2", tersedia: true },
                                    { nomor: "3", tersedia: false },
                                    { nomor: "4", tersedia: true },
                                    { nomor: "5", tersedia: true },
                                    { nomor: "6", tersedia: true },
                                    { nomor: "7", tersedia: true }
                                ]
                            },
                            {
                                nama: "Wuling Cortez",
                                plat: "BA 9876 EF",
                                kursi: [
                                    { nomor: "1", tersedia: true },
                                    { nomor: "2", tersedia: true },
                                    { nomor: "3", tersedia: true },
                                    { nomor: "4", tersedia: true },
                                    { nomor: "5", tersedia: false },
                                    { nomor: "6", tersedia: true },
                                    { nomor: "7", tersedia: true }
                                ]
                            }
                        ]
                    },
                    {
                        id: 2,
                        asal: "Padang",
                        tujuan: "Tebo",
                        armada: [
                            {
                                nama: "Daihatsu Xenia",
                                plat: "BA 4321 GH",
                                kursi: [
                                    { nomor: "1", tersedia: true },
                                    { nomor: "2", tersedia: false },
                                    { nomor: "3", tersedia: true },
                                    { nomor: "4", tersedia: true },
                                    { nomor: "5", tersedia: true },
                                    { nomor: "6", tersedia: true }
                                ]
                            },
                            {
                                nama: "Toyota Calya",
                                plat: "BA 1111 ZZ",
                                kursi: [
                                    { nomor: "1", tersedia: true },
                                    { nomor: "2", tersedia: true },
                                    { nomor: "3", tersedia: true },
                                    { nomor: "4", tersedia: true },
                                    { nomor: "5", tersedia: true },
                                    { nomor: "6", tersedia: false }
                                ]
                            }
                        ]
                    }
                ];

                // Methods
                const pilihRute = (asal, tujuan) => {
                    ruteDipilih.value = ruteList.find(r => r.asal === asal && r.tujuan === tujuan);
                    booking.value.rute = `${asal} ‚Üí ${tujuan}`;
                    booking.value.tujuan = tujuan;
                };

                const pilihLokasi = (lokasi) => {
                    lokasiDipilih.value = lokasi;
                    booking.value.jemput = lokasi;
                };

                const toggleSeat = (seat, armada) => {
                    if (!seat.tersedia) return;

                    // Reset jika ganti armada
                    if (seatDipilihArmada.value !== armada) {
                        seatDipilih.value = [];
                        seatDipilihArmada.value = armada;
                    }

                    const idx = seatDipilih.value.findIndex(s => s.nomor === seat.nomor);
                    if (idx >= 0) {
                        seatDipilih.value.splice(idx, 1);
                    } else {
                        seatDipilih.value.push(seat);
                    }

                    booking.value.seatDipilih = [...seatDipilih.value];
                };

                const pilihArmada = (armada) => {
                    armadaDipilih.value = armada;
                    booking.value.armada = armada;
                    page.value = 'konfirmasi';
                };

                const submitBooking = () => {
                    if (!booking.value.nama || !booking.value.hp || !booking.value.tanggal) {
                        Swal.fire({
                            icon: 'warning',
                            title: 'Yuk lengkapi data pemesanan dulu!',
                            showConfirmButton: false,
                            timer: 1400
                        });
                        return;
                    }

                    riwayat.value.push({
                        ...booking.value,
                        status: 'pending'
                    });

                    // Reset form
                    booking.value = {
                        nama: '',
                        hp: '',
                        tanggal: '',
                        rute: '',
                        jemput: '',
                        tujuan: '',
                        armada: null,
                        seatDipilih: [],
                        catatan: ''
                    };
                    seatDipilih.value = [];
                    seatDipilihArmada.value = null;

                    Swal.fire({
                        icon: 'success',
                        title: 'Yeay, booking kamu berhasil disimpan!',
                        text: 'Tunggu konfirmasi dari admin ya üòä',
                        showConfirmButton: false,
                        timer: 10000
                    });
                    page.value = 'riwayat';
                };

                const statusText = (status) => {
                    const texts = {
                        'pending': 'Menunggu',
                        'confirmed': 'Dikonfirmasi',
                        'selesai': 'Selesai'
                    };
                    return texts[status] || status;
                };

                const formatDate = (dateString) => {
                    if (!dateString) return '';
                    const date = new Date(dateString);
                    return date.toLocaleDateString('id-ID', {
                        day: 'numeric',
                        month: 'long',
                        year: 'numeric'
                    });
                };

                // Set tanggal default besok
                onMounted(() => {
                    const tomorrow = new Date();
                    tomorrow.setDate(tomorrow.getDate() + 1);
                    const yyyy = tomorrow.getFullYear();
                    const mm = String(tomorrow.getMonth() + 1).padStart(2, '0');
                    const dd = String(tomorrow.getDate()).padStart(2, '0');
                    booking.value.tanggal = `${yyyy}-${mm}-${dd}`;
                });

                // SweetAlert toast minimalis di pojok kanan atas setiap pindah halaman
                watch(page, (newPage, oldPage) => {
                    let msg = '';
                    if (newPage === 'rute') {
                        msg = 'Ayo pilih rute perjalanan kamu!';
                    } else if (newPage === 'lokasi') {
                        msg = 'Yuk tentukan lokasi keberangkatan / Penjemputan!';
                    } else if (newPage === 'armada') {
                        msg = 'Ayo pilih armada dan kursi yang kamu mau!';
                    } else if (newPage === 'konfirmasi') {
                        msg = 'Cek lagi data pemesanan kamu, ya!';
                    } else if (newPage === 'riwayat') {
                        msg = 'Ini riwayat pemesanan kamu üòä';
                    }
                    if (msg) {
                        Swal.fire({
                            toast: true,
                            position: 'top-end',
                            icon: 'info',
                            title: msg,
                            showConfirmButton: false,
                            timer: 4000,
                            timerProgressBar: true,
                            background: '#fff',
                            iconColor: '#3b82f6',
                            customClass: {
                                popup: 'swal2-toast'
                            }
                        });
                    }
                });

                return {
                    page,
                    ruteDipilih,
                    lokasiDipilih,
                    alamatRumah,
                    armadaDipilih,
                    seatDipilih,
                    seatDipilihArmada,
                    booking,
                    riwayat,
                    ruteList,
                    pilihRute,
                    pilihLokasi,
                    toggleSeat,
                    pilihArmada,
                    submitBooking,
                    statusText,
                    formatDate
                };
            }
        }).mount("#app");
    </script>

</body>

</html>